@model Minvu.Snat.Domain.Forms.BusquedaDetalleAutorizaciondePago

<style>
    #mdialTamanio {
        width: 50% !important;
    }
</style>
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.10.4/jquery-ui.min.js"></script>
<script type="text/javascript" src="../jquery.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        //ddlRegion Selectedchange event
        $("#btnGuardarRechazo").click(function () {
            soltds = [];
            cont = 0;
            checkboxes = document.getElementsByTagName('input'); //obtenemos todos los controles del tipo Input

            for (i = 0; i < checkboxes.length; i++)//recoremos todos los controles
            {
                if (checkboxes[i].type == "checkbox" && checkboxes[i].name == "chkRechazo") //solo si es un checkbox entramos
                {
                    if (checkboxes[i].checked) {
                        soltds[cont] = checkboxes[i].value;
                        cont++;
                    }
                }
            }

            $.ajax({
                type: 'POST',
                url: '@Url.Action("UpdateSolicitudes")', //Llamada al metodo Json
                dataType: 'json',
                data: { Solicitudes: soltds },
                success: function (result) {

                },
                error: function (ex) {
                    //alert('Error al obtener provincias.' + ex);
                }
            });
            return false;
        })
    });

    $(function () {
        var move_right = '<span class="glyphicon glyphicon-minus pull-left  dual-list-move-right" title="Remove Selected"></span>';
        var move_left = '<span class="glyphicon glyphicon-plus  pull-right dual-list-move-left " title="Add Selected"></span>';

        $(".dual-list.list-left .list-group").sortable({
            stop: function (event, ui) {
                updateSelectedOptions();
            }
        });

        $('body').on('click', '.list-group .list-group-item', function () {
            $(this).toggleClass('active');
        });

        $('body').on('click', '.dual-list-move-right', function (e) {
            e.preventDefault();

            actives = $(this).parent();
            $(this).parent().find("span").remove();
            $(move_left).clone().appendTo(actives);
            actives.clone().appendTo('.list-right ul').removeClass("active");
            actives.remove();

            sortUnorderedList("dual-list-right");

            updateSelectedOptions();
        });

        $('body').on('click', '.dual-list-move-left', function (e) {
            e.preventDefault();

            actives = $(this).parent();
            $(this).parent().find("span").remove();
            $(move_right).clone().appendTo(actives);
            actives.clone().appendTo('.list-left ul').removeClass("active");
            actives.remove();

            updateSelectedOptions();
        });

        $('.move-right, .move-left').click(function () {
            var $button = $(this), actives = '';
            if ($button.hasClass('move-left')) {
                actives = $('.list-right ul li.active');
                actives.find(".dual-list-move-left").remove();
                actives.append($(move_right).clone());
                actives.clone().appendTo('.list-left ul').removeClass("active");
                actives.remove();
            } else if ($button.hasClass('move-right')) {
                actives = $('.list-left ul li.active');
                actives.find(".dual-list-move-right").remove();
                actives.append($(move_left).clone());
                actives.clone().appendTo('.list-right ul').removeClass("active");
                actives.remove();
            }

            updateSelectedOptions();
        });

        function updateSelectedOptions() {
            $('#dual-list-options').find('option').remove();

            $('.list-left ul li').each(function (idx, opt) {
                $('#dual-list-options').append($("<option></option>")
                    .attr("value", $(opt).data("value"))
                    .text($(opt).text())
                    .prop("selected", "selected")
                );
            });
        }

        $('.dual-list .selector').click(function () {
            var $checkBox = $(this);
            if (!$checkBox.hasClass('selected')) {
                $checkBox.addClass('selected').closest('.well').find('ul li:not(.active)').addClass('active');
                $checkBox.children('i').removeClass('glyphicon-unchecked').addClass('glyphicon-check');
            } else {
                $checkBox.removeClass('selected').closest('.well').find('ul li.active').removeClass('active');
                $checkBox.children('i').removeClass('glyphicon-check').addClass('glyphicon-unchecked');
            }
        });

        $('[name="SearchDualList"]').keyup(function (e) {
            var code = e.keyCode || e.which;
            if (code == '9') return;
            if (code == '27') $(this).val(null);
            var $rows = $(this).closest('.dual-list').find('.list-group li');
            var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
            $rows.show().filter(function () {
                var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
                return !~text.indexOf(val);
            }).hide();
        });

        $(".glyphicon-search").on("click", function () {
            $(this).next("input").focus();
        });

        function sortUnorderedList(ul, sortDescending) {
            $("#" + ul + " li").sort(sort_li).appendTo("#" + ul);

            function sort_li(a, b) {
                return ($(b).data('value')) < ($(a).data('value')) ? 1 : -1;
            }
        }

        $("#dual-list-left li").append(move_right);
        $("#dual-list-right li").append(move_left);
    });
</script>

<style>
    .list-left li, .list-right li {
        cursor: pointer;
    }
</style>

<script type="text/javascript">
    var inputs = "input[maxlength], textarea[maxlength]";

    $(document).on('keyup', "[maxlength]", function (e) {
        var este = $(this),
            maxlength = este.attr('maxlength'),
            maxlengthint = parseInt(maxlength),
            textoActual = este.val(),
            currentCharacters = este.val().length;
        remainingCharacters = maxlengthint - currentCharacters,
            espan = este.prev('label').find('span');
        // Detectamos si es IE9 y si hemos llegado al final, convertir el -1 en 0 - bug ie9 porq. no coge directamente el atributo 'maxlength' de HTML5
        if (document.addEventListener && !window.requestAnimationFrame) {
            if (remainingCharacters <= -1) {
                remainingCharacters = 0;
            }
        }

        espan.html(remainingCharacters);
    });
</script>

<script type="text/javascript">
    function marcar(source) {
        checkboxes = document.getElementsByTagName('input'); //obtenemos todos los controles del tipo Input

        for (i = 0; i < checkboxes.length; i++)//recoremos todos los controles
        {
            if (checkboxes[i].type == "checkbox" && checkboxes[i].name == "chkRechazo") //solo si es un checkbox entramos
            {
                checkboxes[i].checked = source.checked; //si es un checkbox le damos el valor del checkbox que lo llamó (Marcar/Desmarcar Todos)
            }
        }
    }
</script>

<script type="text/javascript">
    $(function () {
        $("#btnSubmit").click(function () {
            $('.spinner').css('display', 'block');

            $.ajax({
                type: "POST",
                url: '@Url.Action("RatificarAutorizacion")',
                dataType: 'json',
                data: { idAutorizacion: ($("#hiddenIDAUTORIZACION").val()) },
                success: function (response) {
                    $('#Confirmar').modal('toggle');

                    if (response.success) {
                        if (response.Estado == "1") {
                            $('#PopUpRatificar').modal('toggle');
                            $('#strongError').html(response.Mensaje);
                            $('#divSuccess').show();
                            $('#divError').hide();
                            $("#btnRatificar").hide();
                            $('.spinner').css('display', 'none');
                        }
                    } else {
                        $('#PopUpRatificar').modal('toggle');
                        $('#strongError').html(response.Mensaje);
                        $('#divSuccess').hide();
                        $('#divError').show();
                        $('.spinner').css('display', 'none');
                    }
                },
                failure: function (response) {
                    $('#Confirmar').modal('toggle');
                    $('#PopUpRatificar').modal('toggle');
                    $('#divSuccess').hide();
                    $('#divError').show();
                    $('.spinner').css('display', 'none');
                },
                error: function (response) {
                    $('#Confirmar').modal('toggle');
                    $('#PopUpRatificar').modal('toggle');
                    $('#divSuccess').hide();
                    $('#divError').show();
                    $('.spinner').css('display', 'none');
                }
            });
        });
    });
</script>

<script>
    $(function () {
        $("#btnVolver").click(function () {
            document.location = '@Url.Action("BusquedaAutorizacionDePago", "AutorizacionesDePago", new { sesiones = true })';
        });
    });
</script>

<div class="container" id="PrintDV">
    <form method="post" action="ConvertToPDF">

        <div class="panel panel-info">
            <div class="panel-heading">
                <h2 class="panel-title">Detalle de la autorización de pago.</h2>
            </div>

            <!-- #region Informacion DEtalle Autorizacion Resumen-->
            <div class="panel-body">

                <div class="row">
                    <span class="col-md-3 small">
                        <strong>N° autorización:</strong>
                    </span>
                    <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.NROAUTORIZACION)</p>
                    @Html.HiddenFor(Model => Model._DetalleAutorizaciondePagoResumenEntities.IDAUTORIZACION, new { id = "hiddenIDAUTORIZACION" })

                    <span class="col-md-3 small">
                        <strong>Región:</strong>
                    </span>
                    <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.NOMBREREGIONDIRECCION)</p>
                </div>
                <div class="row">
                    <span class="col-md-3 small">
                        <strong>N° de proyectos:</strong>
                    </span>
                    <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.NROPROYECTOS)</p>

                    <span class="col-md-3 small">
                        <strong>Fecha autorización:</strong>
                    </span>
                    @if (Model._DetalleAutorizaciondePagoResumenEntities.FECHAINGRESOAUTORIZACION == null)
                    {
                        <p class="col-md-3 small">Sin Información</p>
                    }
                    else
                    {
                        <p class="col-md-3 small">@Convert.ToDateTime(Model._DetalleAutorizaciondePagoResumenEntities.FECHAINGRESOAUTORIZACION).ToShortDateString()</p>
                    }
                    @*<p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.FECHAINGRESOAUTORIZACION)</p>*@
                </div>
                <div class="row">
                    <span class="col-md-3 small">
                        <strong>N° de solicitudes:</strong>
                    </span>
                    <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.CANTIDADSOLICITUDES)</p>

                    <span class="col-md-3 small">
                        <strong>Programa:</strong>
                    </span>
                    <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.NOMBREPROGRAMA)</p>
                </div>
                <div class="row">
                    <span class="col-md-3 small">
                        <strong>Nombre proveedor:</strong>
                    </span>
                    <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.NOMBREPROVEEDOR)</p>

                    <span class="col-md-3 small">
                        <strong>Tipo de llamado:</strong>
                    </span>
                    <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.NOMBREMAESTROLLAMADO)</p>
                    @*<span class="col-md-3 small">
                            <strong>Rut empesa proveedora:</strong>
                        </span>
                        <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.RUTPROVEEDOR)</p>*@
                </div>
                <div class="row">
                    <span class="col-md-3 small">
                        <strong>Estado autorización:</strong>
                    </span>
                    <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.NOMBREMAESTROESTADOAUTORIZACION)</p>

                    <span class="col-md-3 small">
                        <strong>Monto autorización (UF):</strong>
                    </span>
                    @{
                        string cadena1 = Model._DetalleAutorizaciondePagoResumenEntities.MONTOTOTALAUTORIZACION.ToString();
                        string[] separadas1;
                        int montoInicio1 = 0;
                        separadas1 = cadena1.Split(',');
                        montoInicio1 = Convert.ToInt32(separadas1.GetValue(0).ToString().Replace(".", ""));
                        string total1 = "";


                        String monto1 = string.Empty;
                        int cantidadCaracter1 = 0;
                        String decimales1 = string.Empty;

                        monto1 = Model._DetalleAutorizaciondePagoResumenEntities.MONTOTOTALAUTORIZACION.ToString();
                        cantidadCaracter1 = Model._DetalleAutorizaciondePagoResumenEntities.MONTOTOTALAUTORIZACION.ToString().Length;
                        decimales1 = monto1.Substring((cantidadCaracter1 - 4), 4);
                        total1 = montoInicio1.ToString("C").Replace(",00", "").Replace("$", "") + decimales1;
                    }

                    <p class="col-md-3 small" id="MtoTotalAutorizacion">@total1</p>
                </div>
                <div class="row">
                    <span class="col-md-3 small">
                        <strong>Tipo proveedor:</strong>
                    </span>
                    <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.NOMBREMAESTROTIPOPROVEEDOR)</p>

                    <span class="col-md-3 small">
                        <strong>Usuario ratificador:</strong>
                    </span>
                    <p class="col-md-3 small">@Html.DisplayFor(model => model._DetalleAutorizaciondePagoResumenEntities.USUARIORESPONSABLESOLICITUDPAGO)</p>
                </div>
            </div>
            <!-- #endregion -->
        </div>
        <div class="panel panel-info">
            <div class="panel-heading">
                <h2 class="panel-title">Sección información de SPS</h2>
            </div>

            <!-- #region Informacion proyecto SPS-->
            <div class="panel-body">
                <div class="row">
                    <span class="col-md-3 small">
                        <strong>Fecha UF:</strong>
                    </span>
                    <p class="col-md-3 small">No inyectado</p>
                    <span class="col-md-3 small">
                        <strong>Valor UF($)</strong>
                    </span>
                    <p class="col-md-3 small">No inyectado</p>
                </div>
                <div class="row">
                    <span class="col-md-3 small">
                        <strong>Fecha inyección:</strong>
                    </span>
                    <p class="col-md-3 small">No inyectado</p>

                    <span class="col-md-3 small">
                        <strong>Monto autorización ($):</strong>
                    </span>
                    <p class="col-md-3 small">No inyectado</p>
                </div>
            </div>
            <!-- #endregion -->
        </div>
        <div class="panel panel-info">
            <div class="panel-heading">
                <h2 class="panel-title">Proyectos asociados</h2>
            </div>
            <div id="divGrillaProyecto">
                <div class="dataTables_wrapper form-inline dt-bootstrap no-footer">
                    <div class="row">
                        <div class="col-sm-6"></div>
                        <div class="col-sm-6">
                            <div class="dataTables_filter" id="grillaProyectos_filter">
                                <label>
                                    Buscar:
                                    <input class="form-control" id="myInput" type="text" placeholder="Buscar..">
                                </label>
                            </div>
                        </div>
                    </div>
                    @*lstDetalleAutorizaciondePagoDetalle*@
                    <div class="row">
                        <div class="col-sm-12">
                            <table class="table table-bordered table-condensed table-hover sma ll text-center dataTable no-footer col-sm-12" id="grillaProyectos" role="grid">
                                <thead>
                                    <tr class="active" role="row">



                                        <th tabindex="0" class="text-center sorting_asc" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Id solicitud" aria-sort="ascending" rowspan="1" colspan="1">ID Solicitud</th>
                                        <th tabindex="0" class="text-center sorting_asc" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Nombre programa" aria-sort="ascending" rowspan="1" colspan="1">Código proyecto</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Region" aria-sort="ascending" rowspan="1" colspan="1">Nombre proyecto</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Codigo de proyecto o n° rut" aria-sort="ascending" rowspan="1" colspan="1">Provincia</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Tipologia" aria-sort="ascending" rowspan="1" colspan="1">Comuna</th>



                                        @foreach (var item in Model.listaNombres)
                                        {
                                            <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="N vivienda" aria-sort="ascending" rowspan="1" colspan="1">@item (UF)</th>
                                        }


                                        @foreach (var item in Model._grillaPDF)
                                        {

                                            if (item.MONTOFTOTOTALSOLICITUDAUTORIZACION != "0,000")
                                            {
                                                <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="N vivienda" aria-sort="ascending" rowspan="1" colspan="1">MONTO FTO TOTAL (UF)</th>
                                            }

                                            if (item.FTOSOLICITUDAUTORIZACION != "0,000")
                                            {
                                                <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="N vivienda" aria-sort="ascending" rowspan="1" colspan="1">MONTO A PAGO FTO (UF)</th>
                                            }

                                            if (item.MONTOATSOLICITUDAUTORIZACION != "0,000")
                                            {
                                                <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="N vivienda" aria-sort="ascending" rowspan="1" colspan="1">MONTO AT (UF)</th>
                                            }

                                            if (item.MONTOAPAGOSOLICITUDAUTORIZACION != "0,000" && item.MONTOFTOTOTALSOLICITUDAUTORIZACION == "0,000")
                                            {
                                                <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="N vivienda" aria-sort="ascending" rowspan="1" colspan="1">MONTO A PAGO (UF)</th>
                                            }

                                            break;
                                        }

                                        @*<th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Tipologia" aria-sort="ascending" rowspan="1" colspan="1">Eliminar solicitud</th>*@
                                    </tr>
                                </thead>
                                <tbody id="myTable">


                                    @if (Model._grillaPDF != null && Model._grillaPDF.Count > 0)
                                    {

                                        foreach (var item in Model._grillaPDF)
                                        {
                                            String monto = string.Empty;
                                            int cantidadCaracter = 0;
                                            String decimales = string.Empty;
                                    <tr class="odd" role="row">

                                        <td style="vertical-align: middle;"> @item.NUMEROSOLICITUDSOLICITUDAUTORIZACION </td>

                                        <td style="vertical-align: middle;"> @item.CODIGOPROYECTOSOLICITUDAUTORIZACION </td>

                                        <td style="vertical-align: middle;"> @item.NOMBREPROYECTOSOLICITUDAUTORIZACION </td>

                                        <td style="vertical-align: middle;"> @item.UBICACIONCOMUNASOLICITUDAUTORIZACION </td>

                                        <td style="vertical-align: middle;">@item.UBICACIONCOMUNASOLICITUDAUTORIZACION </td>

                                        @if (item.S1SOLICITUDAUTORIZACION != "N")
                                        {
                                            string cadena = item.S1SOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.S1SOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.S1SOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.S1SOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.S1SOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @if (item.S2SOLICITUDAUTORIZACION != "N")
                                        {
                                            string cadena = item.S2SOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.S2SOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.S2SOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.S2SOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.S2SOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @if (item.S3SOLICITUDAUTORIZACION != "N")
                                        {
                                            string cadena = item.S3SOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.S3SOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.S3SOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.S3SOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.S3SOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @if (item.S4SOLICITUDAUTORIZACION != "N")
                                        {
                                            string cadena = item.S4SOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.S4SOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.S4SOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.S4SOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.S4SOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @if (item.S5SOLICITUDAUTORIZACION != "N")
                                        {
                                            string cadena = item.S5SOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.S5SOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.S5SOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.S5SOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.S5SOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @if (item.S6SOLICITUDAUTORIZACION != "N")
                                        {
                                            string cadena = item.S6SOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.S6SOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.S6SOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.S6SOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.S6SOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @if (item.S7SOLICITUDAUTORIZACION != "N")
                                        {
                                            string cadena = item.S7SOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.S7SOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.S7SOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.S7SOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.S7SOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @if (item.S8SOLICITUDAUTORIZACION != "N")
                                        {
                                            string cadena = item.S8SOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.S8SOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.S8SOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.S8SOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.S8SOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @if (item.S9SOLICITUDAUTORIZACION != "N")
                                        {
                                            string cadena = item.S9SOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.S9SOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.S9SOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.S9SOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.S9SOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @if (item.S10SOLICITUDAUTORIZACION != "N")
                                        {
                                            string cadena = item.S10SOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";


                                            monto = item.S10SOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.S10SOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.S10SOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.S10SOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }

                                        @if (item.FTOSOLICITUDAUTORIZACION != "0,000")
                                        {
                                            string cadena = item.FTOSOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.FTOSOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.FTOSOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.FTOSOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.FTOSOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }

                                        @if (item.MONTOFTOTOTALSOLICITUDAUTORIZACION != "0,000")
                                        {
                                            string cadena = item.MONTOFTOTOTALSOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";


                                            monto = item.MONTOFTOTOTALSOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.MONTOFTOTOTALSOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);

                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;

                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.MONTOFTOTOTALSOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.MONTOFTOTOTALSOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }

                                        @if (item.MONTOATSOLICITUDAUTORIZACION != "0,000")
                                        {
                                            string cadena = item.MONTOATSOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.MONTOATSOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.MONTOATSOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);
                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.MONTOATSOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @if (item.MONTOAPAGOSOLICITUDAUTORIZACION != "0,000")
                                        {
                                            string cadena = item.MONTOAPAGOSOLICITUDAUTORIZACION.ToString();
                                            string[] separadas;
                                            int montoInicio = 0;
                                            separadas = cadena.Split(',');
                                            montoInicio = Convert.ToInt32(separadas.GetValue(0).ToString().Replace(".", ""));
                                            string total = "";

                                            monto = item.MONTOAPAGOSOLICITUDAUTORIZACION;
                                            cantidadCaracter = item.MONTOAPAGOSOLICITUDAUTORIZACION.Length;
                                            decimales = monto.Substring((cantidadCaracter - 4), 4);

                                            total = montoInicio.ToString("C").Replace(",00", "").Replace("$", "") + @decimales;
                                            //<td style="vertical-align: middle;">@Convert.ToDecimal(item.MONTOAPAGOSOLICITUDAUTORIZACION).ToString("N0")@decimales</td>
                                            //<td style="vertical-align: middle;">@Math.Truncate(Convert.ToDecimal(item.MONTOAPAGOSOLICITUDAUTORIZACION))@decimales</td>
                                            <td style="vertical-align: middle;"> @total</td>
                                        }
                                        @*<td style="vertical-align: middle;">
             @Html.CheckBoxFor(modelitem => item.eliminarSolicitud, new
        {
            @checked = item.eliminarSolicitud,
            @id = ("chkIncremento" + item.NUMEROSOLICITUDSOLICITUDAUTORIZACION)
        })
         </td>*@
                                    </tr>
                                        }

                                    }
                                    else
                                    {
                                        <tr>
                                            <td colspan="16" align="center">
                                                No existen datos
                                            </td>

                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel-body">
                <div class="row">
                    <div class="col-md-12">
                        @*<button type="button" class="btn btn-primary pull-right" data-toggle="modal" data-target="#PopUPrechazarSolicitud">Rechazar</button>*@
                    </div>
                </div>
            </div>
        </div>
        <div id="PopUPrechazarSolicitud" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-body">
                        <p>¿Esta seguro que desea rechazar la(s) solicitud(es) seleccionadas?</p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" data-toggle="modal" data-target="#PopUpMotivoRechazo">Aceptar</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cancelar</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopUpMotivoRechazo" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Autorizacion N° @Model._DetalleAutorizaciondePagoResumenEntities.NROAUTORIZACION</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <p>Motivo del rechazo de la solicitud</p>
                            <br />
                            <label> Caracteres restantes: <span>200</span></label>
                            <textarea class="form-control" maxlength="200"></textarea>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Volver</button>
                        <button type="button" class="btn btn-default" data-dismiss="modal" data-toggle="modal" data-target="#PopUpSolicitudRechazada" id="btnGuardarRechazo">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopUpRatificar" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Ratificación de la Autorización N° @Model._DetalleAutorizaciondePagoResumenEntities.NROAUTORIZACION</h4>
                    </div>
                    <div class="modal-body">
                        <div id="divSuccess" class="alert alert-success oculta">
                            <button class="close" type="button" data-dismiss="alert"></button>
                            <strong id="strongSuccess">Ratificado exitosamente.</strong>
                        </div>
                        <div id="divError" class="alert alert-danger oculta">
                            <button class="close" type="button" data-dismiss="alert"></button>
                            <strong id="strongError">Error al intentar Ratificar.</strong>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopUpAutorizacionesEspeciales" class="modal fade" role="dialog">
            <div class="modal-dialog" id="mdialTamanio">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Autorizaciones especiales cursadas</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <table class="table table-bordered table-condensed table-hover small text-center dataTable no-footer" id="grillaProyectos" role="grid">
                                <thead>
                                    <tr class="active" role="row">
                                        <th tabindex="0" class="text-center sorting_asc" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Código proyecto" aria-sort="ascending" rowspan="1" colspan="1">Detalle</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Nombre proyecto" aria-sort="ascending" rowspan="1" colspan="1">N° Aut. especial</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Región" aria-sort="ascending" rowspan="1" colspan="1">Nombre empresa proveedora</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Programa " aria-sort="ascending" rowspan="1" colspan="1">Tipo empresa proveedora</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Tipología" aria-sort="ascending" rowspan="1" colspan="1">Fecha</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Clase" aria-sort="ascending" rowspan="1" colspan="1">Monto original (UF)</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="S1" aria-sort="ascending" rowspan="1" colspan="1">Monto total (UF) Aut. Especial</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="S2" aria-sort="ascending" rowspan="1" colspan="1">Monto inyectado (UF)</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="S3" aria-sort="ascending" rowspan="1" colspan="1">Estado</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="S4" aria-sort="ascending" rowspan="1" colspan="1">Usuario Responsable</th>
                                        <th tabindex="0" class="text-center sorting" aria-controls="grillaProyecto" style="vertical-align: middle;" aria-label="Acciones" aria-sort="ascending" rowspan="1" colspan="1">Acción</th>
                                    </tr>
                                </thead>
                                <tbody id="myTable">
                                    <tr class="odd" role="row">
                                        <td style="vertical-align: middle;"><input type="checkbox" class="form-check-input" id="exampleCheck1" data-toggle="modal" data-target="#PopUpDetalleAutorizacionPagoEspecial"></td>
                                        <td style="vertical-align: middle;">122042017</td>
                                        <td style="vertical-align: middle;">Consultora de AT. Rolando Silva Ltda.</td>
                                        <td style="vertical-align: middle;">EP</td>
                                        <td style="vertical-align: middle;">26-05-2017</td>
                                        <td style="vertical-align: middle;">87.300</td>
                                        <td style="vertical-align: middle;">-15.000</td>
                                        <td style="vertical-align: middle;">10.000</td>
                                        <td style="vertical-align: middle;">Inyectada</td>
                                        <td style="vertical-align: middle;">Andrea Ruiz L.</td>
                                    </tr>

                                    <tr class="odd" role="row">
                                        <td style="vertical-align: middle;"><input type="checkbox" class="form-check-input" id="exampleCheck1" data-toggle="modal" data-target="#PopUpDetalleAutorizacionPagoEspecial"></td>
                                        <td style="vertical-align: middle;">123042017</td>
                                        <td style="vertical-align: middle;">Consultora de AT. Rolando Silva Ltda.</td>
                                        <td style="vertical-align: middle;">EP</td>
                                        <td style="vertical-align: middle;">26-05-2017</td>
                                        <td style="vertical-align: middle;">87.300</td>
                                        <td style="vertical-align: middle;">-10.000</td>
                                        <td style="vertical-align: middle;">10.000</td>
                                        <td style="vertical-align: middle;">En SPS</td>
                                        <td style="vertical-align: middle;">Andrea Ruiz L.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" data-toggle="modal" data-target="#PopUpRatificarAutorizacionPagoEspecial">Generara autorización de pago especial</button><button type="button" class="btn btn-default" data-dismiss="modal">Imprimir</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopUpRatificarAutorizacionPagoEspecial" class="modal fade" role="dialog">
            <div class="modal-dialog" id="mdialTamanio">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Generar autorizaciones especiales</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">N° autorizacion original (UF):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" value="3170042016" id="idAutorizacion" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Monto autorización especial (UF):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="-10,000" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="MontoOriginal">Monto Original (UF):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="MontoOriginalUF" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Monto original ($)</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="MontoOriginalPesos" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Fecha UF (en SPS):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Fecha inyección SIGFE</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" data-toggle="modal" data-target="#PopUpGenerarAutorizacionPagoEspecial">Ratificar autorización de pago especial</button><button type="button" class="btn btn-default" data-dismiss="modal">Eliminar</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopUpGenerarAutorizacionPagoEspecial" class="modal fade" role="dialog">
            <div class="modal-dialog" id="mdialTamanio">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Generar autorizaciones especiales</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">N° autorizacion original (UF):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="3170042016" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Monto autorización especial (UF):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="-10,000" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="MontoOriginal">Monto Original (UF):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="MontoOriginalUF" value="227,000" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Monto original ($)</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="MontoOriginalPesos" value="6.084.944" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Fecha UF (en SPS):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="09-01-2017" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Fecha inyección SIGFE</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="09-01-2017" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Eliminar</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopUpDetalleAutorizacionPagoEspecial" class="modal fade" role="dialog">
            <div class="modal-dialog" id="mdialTamanio">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <div class="row">
                                <br />
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <div class="form-group col-md-">
                                    </div>
                                    <div class="form-group col-md-12">
                                        <h4 class="modal-title">     Detalle autorizaciones especiales</h4>
                                    </div>
                                    <br />
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">N° autorizacion original (UF):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="3170042016" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Fecha autorización:</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="02-01-201" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="MontoOriginal">Monto autorización de pago (UF):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="MontoOriginalUF" value="87.300" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">N° de proyectos:</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="MontoOriginalPesos" value="2" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Tipo empresa proveedora:</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="EP" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Año calificación definitiva:</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="2016" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Destinatario de pago:</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="Consultora de AT Rolando Silva Ltda." />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Rut destinatario de pago:</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="61.821.000-6" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <div class="form-group col-md-">
                                    </div>
                                    <div class="form-group col-md-12">
                                        <h4 class="modal-title">          Detalle autorizaciones especiales</h4>
                                    </div>
                                    <br />
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Fecha UF:</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="09-01-2017" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Valor UF($):</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="26.823,21" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group col-md-12">
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Fecha inyección:</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="09-01-2017" />
                                    </div>
                                    <label class="col-md-2 control-label input-sm" for="idAutorizacion">Monto autorización especial:</label>
                                    <div class="col-md-4">
                                        <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" value="-10,000" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal" data-toggle="modal" data-target="#PopValorNegativo">Generar autorización de pago especial</button><button type="button" class="btn btn-default">Imprimir</button><button type="button" class="btn btn-default" data-dismiss="modal">Eliminar</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopValorNegativo" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <p>¿Está seguro de ingresar un valor negativo para la autorización de pago N° 3170042016?.</p>
                        </div>
                    </div>
                    <div class="modal-footer">

                        <button type="button" class="btn btn-default" data-dismiss="modal" data-toggle="modal" data-target="#PopUpAceptaValorAutorizacionEspecial">Aceptar</button><button type="button" class="btn btn-default" data-dismiss="modal">Rechazar</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopUpAceptaValorAutorizacionEspecial" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <p>Autorización de pago especial generada correctamente.</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Cerrar</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopUpMantenedorFirmas" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                        <h4 class="modal-title">Mantenedor de firmas</h4>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <p>Favor ingrese el nombre del profesional.</p>
                            <div class="form-group col-md-12">
                                <label class="col-md-4 control-label input-sm" for="idAutorizacion">Nombre del profesional</label>
                                <div class="col-md-8">
                                    <input class="form-control input-sm NumerosEnteros validarRegex" id="idAutorizacion" />
                                </div>
                            </div>

                            <FONT color="red">Atención al guardar el profesional usted quedara relacionado a este registro.</FONT>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Volver</button><button type="button" class="btn btn-default" data-dismiss="modal" data-toggle="modal" data-target="#PopProfesionalGuardado">Guardar</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopUpSolicitudRechazada" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="form-group">
                            <p>La solicitud del proyecto 104147 ha sido rechazada</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>
        <div id="PopProfesionalGuardado" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-body">
                        <div class="form-group">
                            <p>El profesional "JEFE DEPTO. ADM. Y FINANZAS" se guardo exitosamente</p>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">Aceptar</button>
                    </div>
                </div>
            </div>
        </div>


    </form>



    <div class="form-group row">
        <div class="row">
            <div class="pull-right">
                <button class="btn btn-primary" id="btnVolver" type="submit">
                    <span class="glyphicon glyphicon-backward" aria-hidden="true"></span>
                    Volver
                </button>
                &nbsp
                @*<a href="javascript:window.print()">Click to Print This Page</a>*@
                @Html.ActionLink("Imprimir", "reporteAutorizacion", "AutorizacionesDePago", new { @class = "btn btn-default" })
                @if ((Minvu.Security.SingleSignOn.CurrentPrincipal.HasTarea("Sim_Ratificar")) || (Minvu.Security.SingleSignOn.CurrentPrincipal.HasTarea("Sim_RatificarReg")))
                {
                    if ((Model._DetalleAutorizaciondePagoResumenEntities.NOMBREMAESTROESTADOAUTORIZACION == "En Ratificación"))
                    {
                        @:&nbsp
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#Confirmar" id="btnRatificar">Ratificar</button>@*data-toggle="modal" data-target="#PopUpRatificar"*@
                    }
                }
                else
                {
                    if ((Model._DetalleAutorizaciondePagoResumenEntities.NOMBREMAESTROESTADOAUTORIZACION == "En Ratificación"))
                    {
                        @:&nbsp
                        <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#Confirmar" id="btnRatificar" disabled="True">Ratificar</button>
                    }
                }
            </div>
        </div>

    </div>
</div>

<div class="modal fade" id="Confirmar" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span></button>
                <h4 class="modal-title custom_align" id="Heading">Confirmar Ratificación</h4>
            </div>
            <div class="modal-body">
                <div class="alert alert-danger"><span class="glyphicon glyphicon-warning-sign"></span>¿Seguro que desea Ratificar la autorización?</div>
            </div>
            <div class="modal-footer ">
                <p class="navbar-text navbar-left" style="font-size:10px">
                    Usuario Responsable: @SiteHelper.NombreCompletoUsuario (@SiteHelper.UserName)
                </p>
                <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>
                <button type="submit" class="btn btn-primary" id="btnSubmit">Sí</button>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $("#myInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#myTable tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });

    function printDiv(nombreDiv) {
        var contenido = document.getElementById(nombreDiv).innerHTML;
        var contenidoOriginal = document.body.innerHTML;

        document.body.innerHTML = contenido;
        window.print();

        document.body.innerHTML = contenidoOriginal;
    }

    //Puntos de Miles en montos de grilla
    $(document).ready(function () {
        var grilla = document.getElementById('grillaProyectos');
        var i = 1;
        var j = 4;

        for (i = 1; i < grilla.rows.length; i++) {
            for (j = 4; j <= grilla.cells.length; j++) {

                if (grilla.rows[i].cells[j] != undefined) {
                    var numero = grilla.rows[i].cells[j].innerHTML;//Numero completo

                    if (numero != '-') {
                        var parteDecimal = '';//parte decimal del Numero completo
                        var indice = numero.indexOf(',');//indice desde donde se encuentra la coma del decimal
                        var parteEntera = '';//parte entera del numero completo

                        if (indice > 0) {
                            parteDecimal = numero.substring(indice, numero.length);
                            parteEntera = numero.substring(0, numero.indexOf(','))
                        } else {
                            parteEntera = numero;
                        }

                        parteEntera = parteEntera.replace(/\.\b/gi, '');//Reseteo valor sin puntos

                        parteEntera = parteEntera.toString().split('').reverse().join('').replace(/(?=\d*\.?)(\d{3})/g, '$1.');
                        parteEntera = parteEntera.split('').reverse().join('').replace(/^[\.]/, '');

                        grilla.rows[i].cells[j].innerHTML = parteEntera + parteDecimal;
                    }
                }
            }
        }
    });
</script>

@if (Model != null)
{
    //Puntos de miles Monto Total Autorizacion de cabecera
    <script>
        $(document).ready(function () {
            if ($('#MtoTotalAutorizacion').text != '0') {
                if (!((document.getElementById("MtoTotalAutorizacion") == undefined) || (document.getElementById("MtoTotalAutorizacion") == null))) {
                    var numero = document.getElementById("MtoTotalAutorizacion").innerHTML;

                    var parteDecimal = '';//parte decimal del Numero completo
                    var indice = numero.indexOf(',');//indice desde donde se encuentra la coma del decimal
                    var parteEntera = '';//parte entera del numero completo

                    if (indice > 0) {
                        parteDecimal = numero.substring(indice, numero.length);
                        parteEntera = numero.substring(0, numero.indexOf(','))
                    } else {
                        parteEntera = numero;
                    }

                    parteEntera = parteEntera.replace(/\.\b/gi, '');//Reseteo valor sin puntos

                    parteEntera = parteEntera.toString().split('').reverse().join('').replace(/(?=\d*\.?)(\d{3})/g, '$1.');
                    parteEntera = parteEntera.split('').reverse().join('').replace(/^[\.]/, '');

                    document.getElementById("MtoTotalAutorizacion").innerHTML = parteEntera + parteDecimal;
                }
            }
        });
    </script>
}
<!-- #endRegion Informacion proyecto -->